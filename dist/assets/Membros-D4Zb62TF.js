import{t as I}from"./toolbar-D-ATlZDu.js";import{d as E,i as N,r as m,e as D,f as a,o as x,c as g,a as t,w as l,b as o,L as F,m as B,t as P,_ as U,F as $}from"./index-CcguAPKR.js";const G={class:"card"},A={class:"flex flex-wrap items-center justify-between gap-5"},O={class:"flex flex-wrap items-center justify-between gap-5"},R={class:"flex flex-wrap items-center justify-between gap-1"},q={class:"flex items-center gap-4 mb-4"},z={class:"flex items-center gap-4 mb-2",style:{width:"100%"}},J={class:"flex items-center gap-4 mb-4"},K={class:"flex items-center gap-4 mb-2",style:{width:"100%"}},H={class:"flex items-center gap-4 mb-4"},Q={class:"flex items-center gap-4 mb-2",style:{width:"100%"}},W={class:"flex items-center justify-between gap-4 mb-4"},X={class:"flex justify-end",style:{width:"55%"}},Y={__name:"datatable_membros",setup(y){const _=E(),u=N("base_url"),c=m([]),i=m(!1),w=m(),V=m([{name:"Membro",code:"membro"},{name:"Administrador",code:"administrador"},{name:"Gestor",code:"gestor"}]),n=m({nome:"",email:"",senha:"",funcao:"membro"}),T=()=>{p()},p=async()=>{try{const r=await fetch(`${u}/member/all`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(!r.ok)throw new Error("Failed to fetch members");const e=await r.json();c.value=e.data}catch(r){console.error("Error fetching members:",r)}},C=async()=>{console.log("Tentando cadastrar novo membro:",n.value);const r=await fetch(`${u}/member/register`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(n.value)});if(!r.ok)throw new Error("Failed to register member");const e=await r.json();console.log("Resposta do servidor:",e),e.status==="OK"&&(_.add({severity:"success",summary:"Membro cadastrado com sucesso!",group:"br",life:3e3}),p(),n.value={nome:"",email:"",senha:"",funcao:"membro"}),i.value=!1};return D(()=>{p()}),(r,e)=>{const d=a("Button"),h=a("InputText"),f=a("IftaLabel"),b=a("InputGroup"),j=a("Password"),L=a("Select"),S=a("Dialog"),v=a("Column"),k=a("DataTable"),M=a("Toast");return x(),g("div",G,[t(k,{value:c.value,tableStyle:"min-width: 50rem"},{header:l(()=>[o("div",A,[e[10]||(e[10]=o("div",{class:"flex flex-wrap items-center justify-between gap-5"},[o("span",{class:"text-xl font-bold"},"Membros")],-1)),o("div",O,[o("div",R,[t(d,{onClick:e[0]||(e[0]=s=>i.value=!0),severity:"contrast",label:"Alterar Porcentagem",size:"small",rounded:"",raised:""}),t(S,{visible:i.value,"onUpdate:visible":e[6]||(e[6]=s=>i.value=s),modal:"",header:"Formulário",style:{width:"20vw"},breakpoints:{"500px":"60vw","375px":"40vw"}},{default:l(()=>[o("form",{onSubmit:F(C,["prevent"])},[o("div",q,[o("div",z,[t(b,null,{default:l(()=>[t(f,null,{default:l(()=>[t(h,{modelValue:n.value.nome,"onUpdate:modelValue":e[1]||(e[1]=s=>n.value.nome=s),id:"nome",type:"text",required:""},null,8,["modelValue"]),e[7]||(e[7]=o("label",{for:"nome"},"Nome e sobrenome",-1))]),_:1})]),_:1})])]),o("div",J,[o("div",K,[t(b,null,{default:l(()=>[t(f,null,{default:l(()=>[t(h,{modelValue:n.value.email,"onUpdate:modelValue":e[2]||(e[2]=s=>n.value.email=s),id:"email",type:"email",required:""},null,8,["modelValue"]),e[8]||(e[8]=o("label",{for:"email"},"E-mail",-1))]),_:1})]),_:1})])]),o("div",H,[o("div",Q,[t(b,null,{default:l(()=>[t(f,null,{default:l(()=>[t(j,{id:"senha",modelValue:n.value.senha,"onUpdate:modelValue":e[3]||(e[3]=s=>n.value.senha=s),promptLabel:"Digite uma senha",weakLabel:"muito simples",mediumLabel:"Complexidade média",strongLabel:"Senha complexa"},null,8,["modelValue"]),e[9]||(e[9]=o("label",{for:"senha"},"Senha",-1))]),_:1})]),_:1})])]),o("div",W,[t(L,{modelValue:w.value,"onUpdate:modelValue":e[4]||(e[4]=s=>w.value=s),options:V.value,optionLabel:"name",placeholder:"Nivel de Acesso",style:{width:"45%"},class:"w-full"},null,8,["modelValue","options"]),o("div",X,[t(d,{label:"Cancel",text:"",severity:"secondary",onClick:e[5]||(e[5]=s=>i.value=!1),autofocus:""}),t(d,{label:"Cadastrar",severity:"contrast",type:"submit",autofocus:""})])])],32)]),_:1},8,["visible"])]),t(d,{icon:"pi pi-refresh",severity:"contrast",size:"small",rounded:"",raised:"",onClick:T})])])]),footer:l(()=>[B(" In total there are "+P(c.value.length)+" members. ",1)]),default:l(()=>[t(v,{field:"nome",header:"Nome"}),t(v,{field:"email",header:"Email"}),t(v,{field:"funcao",header:"Função"})]),_:1},8,["value"]),t(M,{position:"bottom-right",group:"br"})])}}},Z={__name:"Membros",setup(y){return(_,u)=>(x(),g($,null,[t(I),t(Y)],64))}},oe=U(Z,[["__scopeId","data-v-881b6b5c"]]);export{oe as default};
